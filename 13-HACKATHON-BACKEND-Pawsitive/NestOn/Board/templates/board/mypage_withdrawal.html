{% extends 'board/base.html' %}

{% block title %}탈퇴하기 - NestOn{% endblock %}

{% block content %}
<style>
    .withdrawal-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
    }

    .withdrawal-header {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
        padding: 30px 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        text-align: center;
    }

    .withdrawal-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 8px;
    }

    .withdrawal-subtitle {
        font-size: 16px;
        opacity: 0.9;
    }

    .withdrawal-content {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .warning-section {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
    }

    .warning-title {
        font-size: 18px;
        font-weight: 600;
        color: #856404;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .warning-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .warning-list li {
        color: #856404;
        margin-bottom: 10px;
        padding-left: 20px;
        position: relative;
    }

    .warning-list li:before {
        content: "⚠️";
        position: absolute;
        left: 0;
    }

    .account-info {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
    }

    .account-title {
        font-size: 16px;
        font-weight: 600;
        color: #333;
        margin-bottom: 15px;
    }

    .account-detail {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #e9ecef;
    }

    .account-detail:last-child {
        border-bottom: none;
    }

    .detail-label {
        font-weight: 600;
        color: #333;
    }

    .detail-value {
        color: #666;
    }

    .confirmation-section {
        background: #e3f2fd;
        border: 1px solid #bbdefb;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
    }

    .confirmation-title {
        font-size: 16px;
        font-weight: 600;
        color: #1976d2;
        margin-bottom: 15px;
    }

    .confirmation-text {
        color: #1976d2;
        line-height: 1.6;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
    }

    .form-input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
    }

    .form-input:focus {
        outline: none;
        border-color: #dc3545;
    }

    .checkbox-group {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 20px;
    }

    .checkbox-group input[type="checkbox"] {
        margin-top: 3px;
    }

    .checkbox-label {
        font-size: 14px;
        color: #333;
        line-height: 1.4;
    }

    .withdrawal-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e9ecef;
    }

    .btn {
        padding: 12px 24px;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s;
        border: none;
        min-width: 120px;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background: #545b62;
    }

    .btn-danger {
        background: #dc3545;
        color: white;
    }

    .btn-danger:hover {
        background: #c82333;
    }

    .btn-danger:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    .step-indicator {
        display: flex;
        justify-content: center;
        margin-bottom: 30px;
    }

    .step {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
    }

    .step.active {
        background: #dc3545;
        color: white;
    }

    .step.inactive {
        background: #f8f9fa;
        color: #6c757d;
    }

    .step-number {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
    }

    .step.active .step-number {
        background: white;
        color: #dc3545;
    }

    .step.inactive .step-number {
        background: #6c757d;
        color: white;
    }

    @media (max-width: 768px) {
        .withdrawal-container {
            padding: 15px;
        }
        
        .withdrawal-content {
            padding: 20px;
        }
        
        .withdrawal-actions {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
        }
        
        .step-indicator {
            flex-direction: column;
            gap: 10px;
        }
    }
</style>

<div class="withdrawal-container">
    <div class="withdrawal-header">
        <h1 class="withdrawal-title">탈퇴하기</h1>
        <p class="withdrawal-subtitle">계정을 삭제하기 전에 주의사항을 확인해주세요</p>
    </div>

    <div class="withdrawal-content">
        <!-- 단계 표시 -->
        <div class="step-indicator">
            <div class="step active">
                <div class="step-number">1</div>
                <span>주의사항 확인</span>
            </div>
            <div class="step inactive">
                <div class="step-number">2</div>
                <span>최종 확인</span>
            </div>
        </div>

        <!-- 주의사항 -->
        <div class="warning-section">
            <div class="warning-title">
                ⚠️ 계정 삭제 시 주의사항
            </div>
            <ul class="warning-list">
                <li>계정 삭제는 되돌릴 수 없습니다.</li>
                <li>작성한 모든 제보와 댓글이 영구적으로 삭제됩니다.</li>
                <li>저장된 개인정보와 설정이 모두 삭제됩니다.</li>
                <li>진행 중인 문의나 신고 내역이 모두 삭제됩니다.</li>
                <li>다시 가입하더라도 이전 데이터는 복구되지 않습니다.</li>
            </ul>
        </div>

        <!-- 계정 정보 -->
        <div class="account-info">
            <div class="account-title">삭제될 계정 정보</div>
            <div class="account-detail">
                <span class="detail-label">이름:</span>
                <span class="detail-value">김멋사</span>
            </div>
            <div class="account-detail">
                <span class="detail-label">이메일:</span>
                <span class="detail-value">kim@example.com</span>
            </div>
            <div class="account-detail">
                <span class="detail-label">가입일:</span>
                <span class="detail-value">2024년 1월 15일</span>
            </div>
            <div class="account-detail">
                <span class="detail-label">작성한 제보:</span>
                <span class="detail-value">5개</span>
            </div>
            <div class="account-detail">
                <span class="detail-label">작성한 댓글:</span>
                <span class="detail-value">12개</span>
            </div>
        </div>

        <!-- 확인 절차 -->
        <div class="confirmation-section">
            <div class="confirmation-title">계정 삭제 확인 절차</div>
            <div class="confirmation-text">
                계정을 안전하게 삭제하기 위해 다음 단계를 거쳐야 합니다:<br>
                1. 주의사항을 모두 읽고 이해했는지 확인<br>
                2. "탈퇴하기"를 정확히 입력<br>
                3. 최종 확인 후 계정 삭제 진행
            </div>
        </div>

        <!-- 확인 체크박스 -->
        <div class="checkbox-group">
            <input type="checkbox" id="understandWarning" onchange="checkConfirmation()">
            <label for="understandWarning" class="checkbox-label">
                위의 주의사항을 모두 읽고 이해했습니다.
            </label>
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="agreeDeletion" onchange="checkConfirmation()">
            <label for="agreeDeletion" class="checkbox-label">
                계정 삭제에 동의하며, 이 작업이 되돌릴 수 없음을 인지합니다.
            </label>
        </div>

        <!-- 탈퇴 확인 입력 -->
        <div class="form-group">
            <label class="form-label">계정 삭제를 위해 "탈퇴하기"를 입력해주세요</label>
            <input type="text" class="form-input" id="withdrawalConfirm" placeholder="탈퇴하기" oninput="checkConfirmation()">
        </div>

        <!-- 버튼 -->
        <div class="withdrawal-actions">
            <button type="button" class="btn btn-secondary" onclick="goBack()">취소</button>
            <button type="button" class="btn btn-danger" id="deleteButton" onclick="deleteAccount()" disabled>계정 삭제</button>
        </div>
    </div>
</div>

<script>
    // 확인 상태 체크
    function checkConfirmation() {
        const understandWarning = document.getElementById('understandWarning').checked;
        const agreeDeletion = document.getElementById('agreeDeletion').checked;
        const withdrawalConfirm = document.getElementById('withdrawalConfirm').value;
        const deleteButton = document.getElementById('deleteButton');
        
        const isConfirmed = understandWarning && agreeDeletion && withdrawalConfirm === '탈퇴하기';
        
        deleteButton.disabled = !isConfirmed;
        
        if (isConfirmed) {
            deleteButton.style.background = '#dc3545';
        } else {
            deleteButton.style.background = '#ccc';
        }
    }

    // 계정 삭제
    function deleteAccount() {
        if (!document.getElementById('deleteButton').disabled) {
            if (confirm('정말로 계정을 삭제하시겠습니까?\n이 작업은 되돌릴 수 없습니다.')) {
                // API 호출 (실제 구현 시)
                console.log('계정 삭제 요청');
                alert('계정이 성공적으로 삭제되었습니다.\n그동안 NestOn을 이용해주셔서 감사했습니다.');
                window.location.href = '/';
            }
        }
    }

    // 뒤로가기
    function goBack() {
        window.history.back();
    }

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', function() {
        checkConfirmation();
    });
</script>
{% endblock %}
