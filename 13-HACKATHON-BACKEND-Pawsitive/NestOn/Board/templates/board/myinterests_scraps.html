{% extends 'board/base.html' %}

{% block title %}{{ page_title }} - NestOn{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">📌 {{ page_title }}</h1>
        <p class="page-subtitle">{{ page_subtitle }}</p>
    </div>
    
    <div class="page-content">
        <div class="scraps-container">
            <!-- 스크랩 필터 -->
            <div class="scrap-filters">
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterScraps('all')">전체</button>
                    <button class="filter-btn" onclick="filterScraps('news')">뉴스</button>
                    <button class="filter-btn" onclick="filterScraps('events')">행사</button>
                    <button class="filter-btn" onclick="filterScraps('posts')">게시글</button>
                </div>
                <div class="sort-options">
                    <select id="sortSelect" onchange="sortScraps()">
                        <option value="latest">최신순</option>
                        <option value="oldest">오래된순</option>
                        <option value="title">제목순</option>
                    </select>
                </div>
            </div>
            
            <!-- 스크랩 목록 -->
            <div class="scrap-list" id="scrapList">
                <!-- 스크랩 아이템 1 -->
                <div class="scrap-item" data-type="events" data-date="2024-08-19">
                    <div class="scrap-header">
                        <div class="scrap-type">🎉 행사</div>
                        <div class="scrap-date">2일 전</div>
                    </div>
                    <div class="scrap-title">서대문구 문화축제 개최 안내</div>
                    <div class="scrap-content">
                        서대문구에서 개최되는 문화축제에 대한 상세 안내입니다. 다양한 문화 프로그램과 함께하는 즐거운 시간을 보내세요.
                    </div>
                    <div class="scrap-tags">
                        <span class="tag">문화/예술</span>
                        <span class="tag">서대문구</span>
                    </div>
                    <div class="scrap-actions">
                        <button class="action-btn" onclick="viewScrap(1)">보기</button>
                        <button class="action-btn delete" onclick="deleteScrap(1)">삭제</button>
                    </div>
                </div>
                
                <!-- 스크랩 아이템 2 -->
                <div class="scrap-item" data-type="news" data-date="2024-08-18">
                    <div class="scrap-header">
                        <div class="scrap-type">📰 뉴스</div>
                        <div class="scrap-date">3일 전</div>
                    </div>
                    <div class="scrap-title">강남구 신규 상권 개발 계획 발표</div>
                    <div class="scrap-content">
                        강남구에서 새로운 상권 개발 계획을 발표했습니다. 지역 경제 활성화를 위한 다양한 지원 정책이 포함되어 있습니다.
                    </div>
                    <div class="scrap-tags">
                        <span class="tag">쇼핑/상권</span>
                        <span class="tag">강남구</span>
                    </div>
                    <div class="scrap-actions">
                        <button class="action-btn" onclick="viewScrap(2)">보기</button>
                        <button class="action-btn delete" onclick="deleteScrap(2)">삭제</button>
                    </div>
                </div>
                
                <!-- 스크랩 아이템 3 -->
                <div class="scrap-item" data-type="posts" data-date="2024-08-17">
                    <div class="scrap-header">
                        <div class="scrap-type">💬 게시글</div>
                        <div class="scrap-date">4일 전</div>
                    </div>
                    <div class="scrap-title">해운대구 맛집 추천 - 바다 전망 카페</div>
                    <div class="scrap-content">
                        해운대구에 위치한 바다 전망이 아름다운 카페를 소개합니다. 커피와 함께 즐기는 일몰이 정말 환상적이에요!
                    </div>
                    <div class="scrap-tags">
                        <span class="tag">음식/맛집</span>
                        <span class="tag">해운대구</span>
                    </div>
                    <div class="scrap-actions">
                        <button class="action-btn" onclick="viewScrap(3)">보기</button>
                        <button class="action-btn delete" onclick="deleteScrap(3)">삭제</button>
                    </div>
                </div>
                
                <!-- 스크랩 아이템 4 -->
                <div class="scrap-item" data-type="events" data-date="2024-08-16">
                    <div class="scrap-header">
                        <div class="scrap-type">🎉 행사</div>
                        <div class="scrap-date">5일 전</div>
                    </div>
                    <div class="scrap-title">서울시민 마라톤 대회 참가 신청 안내</div>
                    <div class="scrap-content">
                        올해 서울시민 마라톤 대회 참가 신청이 시작됩니다. 건강한 도시를 위한 시민들의 참여를 기다립니다.
                    </div>
                    <div class="scrap-tags">
                        <span class="tag">체육/운동</span>
                        <span class="tag">서울시</span>
                    </div>
                    <div class="scrap-actions">
                        <button class="action-btn" onclick="viewScrap(4)">보기</button>
                        <button class="action-btn delete" onclick="deleteScrap(4)">삭제</button>
                    </div>
                </div>
            </div>
            
            <!-- 빈 상태 -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">📌</div>
                <h3>스크랩이 없습니다</h3>
                <p>관심 있는 내용을 스크랩해보세요!</p>
            </div>
            
            <!-- 스크랩 통계 -->
            <div class="scrap-stats">
                <h3>스크랩 통계</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">4</div>
                        <div class="stat-label">전체 스크랩</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">2</div>
                        <div class="stat-label">행사</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1</div>
                        <div class="stat-label">뉴스</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1</div>
                        <div class="stat-label">게시글</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .scraps-container {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .scrap-filters {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .filter-buttons {
        display: flex;
        gap: 10px;
    }
    
    .filter-btn {
        padding: 8px 16px;
        border: 2px solid #e1e5e9;
        background: white;
        color: #666;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
    }
    
    .filter-btn.active, .filter-btn:hover {
        background: #4facfe;
        color: white;
        border-color: #4facfe;
    }
    
    .sort-options select {
        padding: 8px 12px;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        background: white;
        color: #666;
        font-size: 14px;
    }
    
    .scrap-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .scrap-item {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border-left: 4px solid #4facfe;
    }
    
    .scrap-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    
    .scrap-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .scrap-type {
        font-weight: 600;
        color: #4facfe;
        font-size: 0.9em;
    }
    
    .scrap-date {
        font-size: 0.8em;
        color: #999;
    }
    
    .scrap-title {
        font-size: 1.1em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 8px;
    }
    
    .scrap-content {
        color: #666;
        font-size: 0.9em;
        line-height: 1.5;
        margin-bottom: 12px;
    }
    
    .scrap-tags {
        display: flex;
        gap: 8px;
        margin-bottom: 15px;
    }
    
    .tag {
        background: #e8f4fd;
        color: #4facfe;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.8em;
        font-weight: 600;
    }
    
    .scrap-actions {
        display: flex;
        gap: 10px;
    }
    
    .action-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.8em;
        transition: all 0.3s ease;
    }
    
    .action-btn:not(.delete) {
        background: #4facfe;
        color: white;
    }
    
    .action-btn.delete {
        background: #e74c3c;
        color: white;
    }
    
    .action-btn:hover {
        transform: translateY(-1px);
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }
    
    .empty-icon {
        font-size: 3em;
        margin-bottom: 15px;
    }
    
    .empty-state h3 {
        margin-bottom: 10px;
        color: #666;
    }
    
    .scrap-stats {
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        margin-top: 30px;
    }
    
    .scrap-stats h3 {
        margin-bottom: 20px;
        color: #2c3e50;
        font-size: 1.2em;
        border-bottom: 2px solid #4facfe;
        padding-bottom: 10px;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
    }
    
    .stat-card {
        text-align: center;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
        border-left: 4px solid #4facfe;
    }
    
    .stat-number {
        font-size: 2em;
        font-weight: 600;
        color: #4facfe;
        margin-bottom: 5px;
    }
    
    .stat-label {
        font-size: 0.9em;
        color: #666;
    }
</style>

<script>
    let currentFilter = 'all';
    
    // 스크랩 필터링
    function filterScraps(type) {
        currentFilter = type;
        
        // 필터 버튼 상태 업데이트
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // 스크랩 아이템 필터링
        const scrapItems = document.querySelectorAll('.scrap-item');
        let visibleCount = 0;
        
        scrapItems.forEach(item => {
            if (type === 'all' || item.dataset.type === type) {
                item.style.display = 'block';
                visibleCount++;
            } else {
                item.style.display = 'none';
            }
        });
        
        // 빈 상태 표시/숨김
        const emptyState = document.getElementById('emptyState');
        if (visibleCount === 0) {
            emptyState.style.display = 'block';
        } else {
            emptyState.style.display = 'none';
        }
    }
    
    // 스크랩 정렬
    function sortScraps() {
        const sortType = document.getElementById('sortSelect').value;
        const scrapList = document.getElementById('scrapList');
        const scrapItems = Array.from(scrapList.children);
        
        scrapItems.sort((a, b) => {
            if (sortType === 'latest') {
                return new Date(b.dataset.date) - new Date(a.dataset.date);
            } else if (sortType === 'oldest') {
                return new Date(a.dataset.date) - new Date(b.dataset.date);
            } else if (sortType === 'title') {
                const titleA = a.querySelector('.scrap-title').textContent;
                const titleB = b.querySelector('.scrap-title').textContent;
                return titleA.localeCompare(titleB);
            }
        });
        
        // 정렬된 아이템들을 다시 추가
        scrapItems.forEach(item => scrapList.appendChild(item));
    }
    
    // 스크랩 보기
    function viewScrap(id) {
        alert(`스크랩 ${id}를 보여줍니다.`);
        // 실제 구현에서는 해당 스크랩의 원본 페이지로 이동
    }
    
    // 스크랩 삭제
    function deleteScrap(id) {
        if (confirm('이 스크랩을 삭제하시겠습니까?')) {
            const scrapItem = event.target.closest('.scrap-item');
            scrapItem.style.animation = 'fadeOut 0.3s ease';
            setTimeout(() => {
                scrapItem.remove();
                updateStats();
            }, 300);
        }
    }
    
    // 통계 업데이트
    function updateStats() {
        const totalScraps = document.querySelectorAll('.scrap-item').length;
        const eventScraps = document.querySelectorAll('.scrap-item[data-type="events"]').length;
        const newsScraps = document.querySelectorAll('.scrap-item[data-type="news"]').length;
        const postScraps = document.querySelectorAll('.scrap-item[data-type="posts"]').length;
        
        // 통계 업데이트 로직 (실제 구현에서는 DOM 업데이트)
        console.log(`전체: ${totalScraps}, 행사: ${eventScraps}, 뉴스: ${newsScraps}, 게시글: ${postScraps}`);
    }
</script>

<style>
    @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-10px); }
    }
</style>
{% endblock %}
