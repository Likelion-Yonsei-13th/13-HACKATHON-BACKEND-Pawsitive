{% extends 'board/base.html' %}

{% block title %}{{ page_title }} - NestOn{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">â• {{ page_title }}</h1>
        <p class="page-subtitle">{{ page_subtitle }}</p>
    </div>
    
    <div class="page-content">
        <div class="region-form-container">
            <div class="region-form">
                <h3>ìƒˆë¡œìš´ ì§€ì—­ ì¶”ê°€</h3>
                <form id="addRegionForm">
                    <div class="form-group">
                        <label for="regionType">ì§€ì—­ ìœ í˜•</label>
                        <select id="regionType" name="regionType" class="form-select" required>
                            <option value="">ì§€ì—­ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="residence">ê±°ì£¼ì§€ì—­</option>
                            <option value="interest">ê´€ì‹¬ì§€ì—­</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="province">ì‹œ/ë„</label>
                        <select id="province" name="province" class="form-select" required>
                            <option value="">ì‹œ/ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                            <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                            <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                            <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>
                            <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                            <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                            <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                            <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                            <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                            <option value="ê°•ì›ë„">ê°•ì›ë„</option>
                            <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
                            <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
                            <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
                            <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
                            <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
                            <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
                            <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="city">ì‹œ/êµ°/êµ¬</label>
                        <select id="city" name="city" class="form-select" required>
                            <option value="">ì‹œ/êµ°/êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="district">ë™/ì/ë©´</label>
                        <select id="district" name="district" class="form-select">
                            <option value="">ë™/ì/ë©´ì„ ì„ íƒí•˜ì„¸ìš” (ì„ íƒì‚¬í•­)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                        <textarea id="description" name="description" class="form-textarea" placeholder="í•´ë‹¹ ì§€ì—­ì— ëŒ€í•œ ì¶”ê°€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" rows="3"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="goBack()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn-primary">ì§€ì—­ ì¶”ê°€</button>
                    </div>
                </form>
            </div>
            
            <div class="info-box">
                <h4>ğŸ’¡ ì§€ì—­ ì¶”ê°€ ì•ˆë‚´</h4>
                <ul>
                    <li><strong>ê±°ì£¼ì§€ì—­</strong>: ì‹¤ì œ ê±°ì£¼í•˜ê³  ìˆëŠ” ì§€ì—­ì„ ì„¤ì •í•©ë‹ˆë‹¤. í•˜ë‚˜ë§Œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                    <li><strong>ê´€ì‹¬ì§€ì—­</strong>: ê´€ì‹¬ ìˆëŠ” ì§€ì—­ë“¤ì„ ì„¤ì •í•©ë‹ˆë‹¤. ìµœëŒ€ 5ê°œê¹Œì§€ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                    <li>ì§€ì—­ì„ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ì†Œì‹ê³¼ í–‰ì‚¬ë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ë™/ì/ë©´ê¹Œì§€ ì„¤ì •í•˜ë©´ ë” ì •í™•í•œ ì§€ì—­ ì •ë³´ë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    .region-form-container {
        max-width: 600px;
        margin: 0 auto;
    }
    
    .region-form {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }
    
    .region-form h3 {
        margin-bottom: 25px;
        color: #2c3e50;
        font-size: 1.2em;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2c3e50;
    }
    
    .form-select, .form-textarea {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e1e5e9;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
        box-sizing: border-box;
        background: white;
    }
    
    .form-select:focus, .form-textarea:focus {
        outline: none;
        border-color: #4facfe;
    }
    
    .form-textarea {
        resize: vertical;
        min-height: 80px;
        font-family: inherit;
    }
    
    .form-actions {
        display: flex;
        gap: 15px;
        justify-content: flex-end;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e1e5e9;
    }
    
    .btn-primary, .btn-secondary {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
    }
    
    .btn-primary {
        background: #2ecc71;
        color: white;
    }
    
    .btn-primary:hover {
        background: #27ae60;
        transform: translateY(-2px);
    }
    
    .btn-secondary {
        background: #95a5a6;
        color: white;
    }
    
    .btn-secondary:hover {
        background: #7f8c8d;
        transform: translateY(-2px);
    }
    
    .info-box {
        background: #e8f4fd;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #4facfe;
    }
    
    .info-box h4 {
        margin-bottom: 10px;
        color: #2c3e50;
        font-size: 1.1em;
    }
    
    .info-box ul {
        margin: 0;
        padding-left: 20px;
        color: #555;
        font-size: 0.9em;
        line-height: 1.6;
    }
    
    .info-box li {
        margin-bottom: 8px;
    }
    
    .info-box strong {
        color: #2c3e50;
    }
    
    .alert {
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-weight: 600;
    }
    
    .alert-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
    
    .alert-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }
</style>

<script>
    // ì‹œ/ë„ ì„ íƒì— ë”°ë¥¸ ì‹œ/êµ°/êµ¬ ì˜µì…˜ ì—…ë°ì´íŠ¸
    document.getElementById('province').addEventListener('change', function() {
        const citySelect = document.getElementById('city');
        const districtSelect = document.getElementById('district');
        const province = this.value;
        
        // ê¸°ì¡´ ì˜µì…˜ ì œê±°
        citySelect.innerHTML = '<option value="">ì‹œ/êµ°/êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
        districtSelect.innerHTML = '<option value="">ë™/ì/ë©´ì„ ì„ íƒí•˜ì„¸ìš” (ì„ íƒì‚¬í•­)</option>';
        
        if (province === 'ì„œìš¸íŠ¹ë³„ì‹œ') {
            const cities = ['ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê´€ì•…êµ¬', 'ê´‘ì§„êµ¬', 'êµ¬ë¡œêµ¬', 'ê¸ˆì²œêµ¬', 'ë…¸ì›êµ¬', 'ë„ë´‰êµ¬', 'ë™ëŒ€ë¬¸êµ¬', 'ë™ì‘êµ¬', 'ë§ˆí¬êµ¬', 'ì„œëŒ€ë¬¸êµ¬', 'ì„œì´ˆêµ¬', 'ì„±ë™êµ¬', 'ì„±ë¶êµ¬', 'ì†¡íŒŒêµ¬', 'ì–‘ì²œêµ¬', 'ì˜ë“±í¬êµ¬', 'ìš©ì‚°êµ¬', 'ì€í‰êµ¬', 'ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ì¤‘ë‘êµ¬'];
            cities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });
        } else if (province === 'ë¶€ì‚°ê´‘ì—­ì‹œ') {
            const cities = ['ê°•ì„œêµ¬', 'ê¸ˆì •êµ¬', 'ë‚¨êµ¬', 'ë™êµ¬', 'ë™ë˜êµ¬', 'ë¶€ì‚°ì§„êµ¬', 'ë¶êµ¬', 'ì‚¬ìƒêµ¬', 'ì‚¬í•˜êµ¬', 'ì„œêµ¬', 'ìˆ˜ì˜êµ¬', 'ì—°ì œêµ¬', 'ì˜ë„êµ¬', 'ì¤‘êµ¬', 'í•´ìš´ëŒ€êµ¬', 'ê¸°ì¥êµ°'];
            cities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });
        }
        // ë‹¤ë¥¸ ì‹œ/ë„ë“¤ë„ í•„ìš”ì‹œ ì¶”ê°€
    });
    
    // ì‹œ/êµ°/êµ¬ ì„ íƒì— ë”°ë¥¸ ë™/ì/ë©´ ì˜µì…˜ ì—…ë°ì´íŠ¸
    document.getElementById('city').addEventListener('change', function() {
        const districtSelect = document.getElementById('district');
        const city = this.value;
        
        // ê¸°ì¡´ ì˜µì…˜ ì œê±°
        districtSelect.innerHTML = '<option value="">ë™/ì/ë©´ì„ ì„ íƒí•˜ì„¸ìš” (ì„ íƒì‚¬í•­)</option>';
        
        if (city === 'ì„œëŒ€ë¬¸êµ¬') {
            const districts = ['ì‹ ì´Œë™', 'ì—°í¬ë™', 'í™ì œë™', 'ë¶ì•„í˜„ë™', 'ì²œì—°ë™', 'ì¶©ì •ë¡œë™', 'í•©ë™', 'ë¯¸ê·¼ë™', 'ëƒ‰ì²œë™', 'ì˜¥ì²œë™', 'ì˜ì²œë™', 'í˜„ì €ë™', 'ë¶ê°€ì¢Œë™', 'ë‚¨ê°€ì¢Œë™', 'ì°½ì²œë™', 'ëŒ€ì‹ ë™', 'ëŒ€í˜„ë™', 'ì‹ ìˆ˜ë™', 'ë´‰ì›ë™', 'ì°½í‰ë™', 'êµë‚¨ë™', 'êµë¶ë™', 'ì¸ì‚¬ë™', 'ì‚¬ì§ë™', 'ì²´ë¶€ë™', 'í•„ìš´ë™', 'ë‚´ìë™', 'ì‚¬ê°„ë™', 'ì†¡í˜„ë™', 'ê°€íšŒë™', 'ì¬ë™', 'ê³„ë™', 'ì›ì„œë™', 'í›ˆì •ë™', 'ë¬˜ë™', 'ë´‰ìµë™', 'ëˆì˜ë™', 'ì¥ì‚¬ë™', 'ê´€ìˆ˜ë™', 'ì¸ì˜ë™', 'ì˜ˆì§€ë™', 'ì›ë‚¨ë™', 'ì—°ì§€ë™', 'ì¢…ë¡œë™', 'íš¨ìë™', 'ë´‰ì›ë™', 'í†µì˜ë™', 'ì ì„ ë™', 'í†µì¸ë™', 'ëˆ„ìƒë™', 'ëˆ„í•˜ë™', 'ì˜¥ì¸ë™'];
            districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
        }
        // ë‹¤ë¥¸ ì‹œ/êµ°/êµ¬ë“¤ë„ í•„ìš”ì‹œ ì¶”ê°€
    });
    
    // í¼ ì œì¶œ
    document.getElementById('addRegionForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        
        submitBtn.textContent = 'ì¶”ê°€ ì¤‘...';
        submitBtn.disabled = true;
        
        try {
            // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  ì‹œë®¬ë ˆì´ì…˜
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const regionType = formData.get('regionType');
            const province = formData.get('province');
            const city = formData.get('city');
            
            showAlert(`${province} ${city}ì´(ê°€) ${regionType === 'residence' ? 'ê±°ì£¼ì§€ì—­' : 'ê´€ì‹¬ì§€ì—­'}ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
            
            setTimeout(() => {
                window.location.href = '/board/myregion/';
            }, 2000);
            
        } catch (error) {
            showAlert('ì§€ì—­ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
        } finally {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        }
    });
    
    // ì•Œë¦¼ í‘œì‹œ
    function showAlert(message, type) {
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type}`;
        alertDiv.textContent = message;
        
        const form = document.querySelector('.region-form');
        form.insertBefore(alertDiv, form.firstChild);
        
        setTimeout(() => {
            alertDiv.remove();
        }, 5000);
    }
    
    // ë’¤ë¡œ ê°€ê¸°
    function goBack() {
        window.history.back();
    }
</script>
{% endblock %}
